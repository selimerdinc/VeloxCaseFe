{"ast":null,"code":"var _s = $RefreshSig$();\n// src/features/dashboard/useDashboard.js\n\nimport { useState, useEffect, useCallback } from 'react';\nimport axios from 'axios';\nimport toast from 'react-hot-toast';\nconst API_BASE_URL = 'https://quickcase-api.onrender.com/api';\n\n/**\n * useDashboard: Dashboard ekranÄ±nÄ±n tÃ¼m veri yÃ¶netimi ve iÅŸ mantÄ±ÄŸÄ±nÄ± yÃ¶netir.\n */\nexport const useDashboard = (token, currentView, onLogout, navigate) => {\n  _s();\n  // --- DASHBOARD STATE'leri ---\n  const [repoId, setRepoId] = useState(1);\n  const [folders, setFolders] = useState([]);\n  const [selectedFolder, setSelectedFolder] = useState('');\n  const [jiraInput, setJiraInput] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [foldersLoading, setFoldersLoading] = useState(false);\n  const [syncResults, setSyncResults] = useState([]);\n  const [showNewFolder, setShowNewFolder] = useState(false);\n  const [newFolderName, setNewFolderName] = useState('');\n\n  // YENÄ°: Dashboard Input Hata State'i\n  const [dashboardErrors, setDashboardErrors] = useState({\n    jiraInput: false,\n    selectedFolder: false,\n    newFolderName: false\n  });\n\n  // YENÄ°: Duplicate (AynÄ± KayÄ±t) YÃ¶netimi Ä°Ã§in State'ler\n  const [showDuplicateModal, setShowDuplicateModal] = useState(false);\n  const [duplicateItem, setDuplicateItem] = useState(null);\n\n  // --- PREVIEW STATE ---\n  const [previewTask, setPreviewTask] = useState(null);\n  const [previewLoading, setPreviewLoading] = useState(false);\n\n  // --- SETTINGS & DATA STATE'leri ---\n  const [settingsData, setSettingsData] = useState({});\n  const [settingsLoading, setSettingsLoading] = useState(false);\n  const [historyData, setHistoryData] = useState([]);\n  const [stats, setStats] = useState({\n    total_cases: 0,\n    total_images: 0,\n    today_syncs: 0\n  });\n  const [settingsTab, setSettingsTab] = useState('api');\n  const [passwordData, setPasswordData] = useState({\n    old: '',\n    new: '',\n    confirm: ''\n  });\n  const [passwordErrors, setPasswordErrors] = useState({\n    old: false,\n    new: false,\n    confirm: false\n  });\n\n  // --- VERÄ° Ã‡EKME Ä°ÅžLEVLERÄ° ---\n  const fetchFolders = useCallback(async () => {\n    if (!repoId || !token || currentView !== 'dashboard') return;\n    setFoldersLoading(true);\n    try {\n      const res = await axios.get(`${API_BASE_URL}/folders/${repoId}`);\n      let list = res.data.folders || [];\n\n      // Alfabetik (TÃ¼rkÃ§e) SÄ±ralama\n      list.sort((a, b) => a.name.localeCompare(b.name, 'tr', {\n        sensitivity: 'base'\n      }));\n      setFolders(list);\n    } catch (err) {\n      var _err$response;\n      if (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 401) onLogout();\n    } finally {\n      setFoldersLoading(false);\n    }\n  }, [repoId, token, currentView, onLogout]);\n  const fetchStats = useCallback(async () => {\n    if (!token || currentView !== 'dashboard') return;\n    try {\n      const res = await axios.get(`${API_BASE_URL}/stats`);\n      setStats(res.data);\n    } catch (err) {\n      console.error(err);\n    }\n  }, [token, currentView]);\n\n  // --- YAN ETKÄ°LER (USE EFFECT) ---\n  useEffect(() => {\n    if (token && currentView === 'dashboard') {\n      fetchFolders();\n      fetchStats();\n    }\n  }, [fetchFolders, fetchStats, token, currentView]);\n  useEffect(() => {\n    if (currentView === 'history' && token) {\n      axios.get(`${API_BASE_URL}/history`).then(res => setHistoryData(res.data));\n    }\n    if (currentView === 'settings' && token) {\n      axios.get(`${API_BASE_URL}/settings`).then(res => {\n        // eslint-disable-next-line no-unused-vars\n        const {\n          ...cleanData\n        } = res.data;\n        setSettingsData(cleanData);\n      });\n    }\n  }, [currentView, token]);\n  useEffect(() => {\n    setPreviewTask(null);\n    const delay = setTimeout(async () => {\n      if (token && jiraInput.length > 5 && !jiraInput.includes(',')) {\n        setPreviewLoading(true);\n        try {\n          const res = await axios.post(`${API_BASE_URL}/preview`, {\n            task_key: jiraInput\n          });\n          setPreviewTask(res.data);\n        } catch {\n          setPreviewTask(null);\n        } finally {\n          setPreviewLoading(false);\n        }\n      } else {\n        setPreviewTask(null);\n      }\n    }, 800);\n    return () => clearTimeout(delay);\n  }, [jiraInput, token]);\n\n  // --- Ä°ÅžLEVLER: CRUD/AKSYONLAR ---\n\n  // 1. Senkronizasyon BaÅŸlatma (GÃœNCELLENDÄ°: Duplicate KontrolÃ¼)\n  const handleSync = async () => {\n    const newErrors = {\n      jiraInput: !jiraInput || jiraInput.trim() === '',\n      selectedFolder: !selectedFolder || selectedFolder === ''\n    };\n    setDashboardErrors(e => ({\n      ...e,\n      ...newErrors\n    }));\n    if (newErrors.jiraInput || newErrors.selectedFolder) {\n      return toast.error(\"LÃ¼tfen Jira AnahtarÄ± ve Hedef KlasÃ¶r alanlarÄ±nÄ± doldurunuz.\", {\n        icon: 'ðŸ›‘'\n      });\n    }\n    setLoading(true);\n    setSyncResults([]);\n    const tId = toast.loading('Entegrasyon baÅŸlatÄ±ldÄ±, veriler iÅŸleniyor...');\n    try {\n      const res = await axios.post(`${API_BASE_URL}/sync`, {\n        jira_input: jiraInput,\n        folder_id: selectedFolder,\n        project_id: repoId\n      });\n      const results = res.data.results || [];\n      setSyncResults(results);\n\n      // --- DUPLICATE KONTROLÃœ ---\n      const duplicate = results.find(r => r.status === 'duplicate');\n      if (duplicate) {\n        // Duplicate varsa modalÄ± aÃ§, loading'i kapat (kullanÄ±cÄ± karar verecek)\n        setDuplicateItem(duplicate);\n        setShowDuplicateModal(true);\n        toast.dismiss(tId);\n      } else {\n        // Duplicate yoksa normal baÅŸarÄ± akÄ±ÅŸÄ±\n        const success = results.filter(r => r.status === 'success').length;\n        const failed = results.length - success;\n        if (success > 0) {\n          toast.success(`Ä°ÅŸlem TamamlandÄ±! ${success} kayÄ±t baÅŸarÄ±yla aktarÄ±ldÄ±. ${failed > 0 ? `(${failed} hata)` : ''}`, {\n            id: tId,\n            duration: 5000\n          });\n          setJiraInput('');\n          fetchStats();\n        } else {\n          toast.error(\"Ä°ÅŸlem sÄ±rasÄ±nda hata oluÅŸtu.\", {\n            id: tId\n          });\n        }\n      }\n    } catch (err) {\n      toast.error(\"Sunucu ile iletiÅŸim kurulamadÄ±.\", {\n        id: tId\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 2. Force Update (KullanÄ±cÄ± \"Evet, GÃ¼ncelle\" dediÄŸinde Ã§alÄ±ÅŸÄ±r)\n  const handleForceUpdate = async () => {\n    if (!duplicateItem) return;\n    setShowDuplicateModal(false); // ModalÄ± kapat\n    setLoading(true);\n    const tId = toast.loading('GÃ¼ncelleme yapÄ±lÄ±yor...');\n    try {\n      // force_update: true parametresi ile tekrar istek atÄ±yoruz\n      const res = await axios.post(`${API_BASE_URL}/sync`, {\n        jira_input: duplicateItem.task,\n        folder_id: selectedFolder,\n        project_id: repoId,\n        force_update: true // <--- Backend bu bayraÄŸÄ± gÃ¶rÃ¼nce gÃ¼ncelleyecek\n      });\n      const newResult = res.data.results[0]; // Tek task olduÄŸu iÃ§in ilk sonucu al\n\n      // Listeyi gÃ¼ncelle: Eski duplicate satÄ±rÄ±nÄ± sil, yeni sonucu ekle\n      setSyncResults(prev => [newResult, ...prev.filter(r => r.task !== duplicateItem.task)]);\n      if (newResult.status === 'success') {\n        toast.success(`Case BaÅŸarÄ±yla GÃ¼ncellendi: ${newResult.case_name}`, {\n          id: tId\n        });\n        fetchStats();\n      } else {\n        toast.error(\"GÃ¼ncelleme baÅŸarÄ±sÄ±z oldu.\", {\n          id: tId\n        });\n      }\n    } catch (err) {\n      toast.error(\"GÃ¼ncelleme sÄ±rasÄ±nda hata oluÅŸtu.\", {\n        id: tId\n      });\n    } finally {\n      setLoading(false);\n      setDuplicateItem(null);\n    }\n  };\n\n  // 3. Yeni KlasÃ¶r OluÅŸturma\n  const handleCreateFolder = async () => {\n    // BoÅŸluk kontrolÃ¼\n    if (!newFolderName || newFolderName.trim() === '') {\n      setDashboardErrors(e => ({\n        ...e,\n        newFolderName: true\n      }));\n      return toast.error(\"LÃ¼tfen klasÃ¶r adÄ± giriniz.\");\n    }\n    const finalName = newFolderName.trim();\n\n    // Ä°sim TekrarÄ± KontrolÃ¼ (Frontend)\n    const isDuplicate = folders.some(f => f.name.toLowerCase() === finalName.toLowerCase());\n    if (isDuplicate) {\n      setDashboardErrors(e => ({\n        ...e,\n        newFolderName: true\n      }));\n      return toast.error(\"Bu isimde bir klasÃ¶r zaten mevcut!\", {\n        icon: 'âš ï¸'\n      });\n    }\n    try {\n      var _res$data$data;\n      const res = await axios.post(`${API_BASE_URL}/folders/${repoId}`, {\n        name: finalName,\n        parent_id: selectedFolder || null\n      });\n      const newFolderId = res.data.id || ((_res$data$data = res.data.data) === null || _res$data$data === void 0 ? void 0 : _res$data$data.id);\n\n      // Listeyi gÃ¼ncelle ve sÄ±rala\n      const listRes = await axios.get(`${API_BASE_URL}/folders/${repoId}`);\n      let allFolders = listRes.data.folders || [];\n      const createdFolderObj = allFolders.find(f => f.id === newFolderId) || {\n        id: newFolderId,\n        name: finalName\n      };\n      const otherFolders = allFolders.filter(f => f.id !== newFolderId);\n\n      // A-Z SÄ±rala\n      otherFolders.sort((a, b) => a.name.localeCompare(b.name, 'tr', {\n        sensitivity: 'base'\n      }));\n\n      // Yeni klasÃ¶rÃ¼ en baÅŸa ekle\n      setFolders([createdFolderObj, ...otherFolders]);\n      if (newFolderId) setSelectedFolder(newFolderId);\n      setNewFolderName('');\n      setShowNewFolder(false);\n      setDashboardErrors(e => ({\n        ...e,\n        newFolderName: false\n      }));\n      toast.success(`KlasÃ¶r baÅŸarÄ±yla oluÅŸturuldu: ${finalName}`, {\n        icon: 'ðŸ“'\n      });\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      setDashboardErrors(e => ({\n        ...e,\n        newFolderName: true\n      }));\n      const msg = ((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.msg) || \"KlasÃ¶r oluÅŸturma hatasÄ±.\";\n      toast.error(msg);\n    }\n  };\n\n  // 4. AyarlarÄ± Kaydetme\n  const saveSettings = async () => {\n    setSettingsLoading(true);\n    try {\n      await axios.post(`${API_BASE_URL}/settings`, settingsData);\n      toast.success(\"YapÄ±landÄ±rma ayarlarÄ± baÅŸarÄ±yla gÃ¼ncellendi.\", {\n        icon: 'ðŸ’¾'\n      });\n      // Ayarlar kaydedilince Dashboard'a dÃ¶n (Opsiyonel, navigate kullanarak)\n      setTimeout(() => navigate('/'), 1000);\n    } catch {\n      toast.error(\"Ayarlar kaydedilemedi. LÃ¼tfen tÃ¼m alanlarÄ±n doÄŸru olduÄŸundan emin olun.\");\n    } finally {\n      setSettingsLoading(false);\n    }\n  };\n\n  // 5. Åžifre DeÄŸiÅŸtirme\n  const handleChangePassword = async () => {\n    setPasswordErrors({\n      old: false,\n      new: false,\n      confirm: false\n    });\n    let hasError = false;\n    const tempErrors = {\n      old: false,\n      new: false,\n      confirm: false\n    };\n    if (!passwordData.old) {\n      tempErrors.old = true;\n      hasError = true;\n    }\n    if (!passwordData.new) {\n      tempErrors.new = true;\n      hasError = true;\n    }\n    if (!passwordData.confirm) {\n      tempErrors.confirm = true;\n      hasError = true;\n    }\n    if (hasError) {\n      setPasswordErrors(tempErrors);\n      return toast.error(\"LÃ¼tfen ÅŸifre alanlarÄ±nÄ± eksiksiz doldurunuz.\");\n    }\n    if (passwordData.new !== passwordData.confirm) {\n      setPasswordErrors(e => ({\n        ...e,\n        new: true,\n        confirm: true\n      }));\n      return toast.error(\"Yeni ÅŸifreler birbiriyle uyuÅŸmuyor.\");\n    }\n    if (passwordData.new.length < 8) {\n      setPasswordErrors(e => ({\n        ...e,\n        new: true,\n        confirm: true\n      }));\n      return toast.error(\"Yeni ÅŸifreniz en az 8 karakter olmalÄ±dÄ±r.\");\n    }\n    setSettingsLoading(true);\n    try {\n      await axios.post(`${API_BASE_URL}/change-password`, {\n        old_password: passwordData.old,\n        new_password: passwordData.new\n      });\n      toast.success(\"Åžifreniz baÅŸarÄ±yla gÃ¼ncellendi. Yeni ÅŸifrenizle giriÅŸ yapÄ±nÄ±z.\", {\n        icon: 'ðŸ”’'\n      });\n      setPasswordData({\n        old: '',\n        new: '',\n        confirm: ''\n      });\n    } catch (err) {\n      var _err$response3, _err$response3$data;\n      const msg = ((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.msg) || \"Åžifre deÄŸiÅŸtirilemedi.\";\n      if (msg.includes('old password is incorrect')) {\n        setPasswordErrors(e => ({\n          ...e,\n          old: true\n        }));\n        toast.error(\"Mevcut ÅŸifreniz hatalÄ±. LÃ¼tfen doÄŸru ÅŸifrenizi giriniz.\");\n      } else {\n        toast.error(msg);\n      }\n    } finally {\n      setSettingsLoading(false);\n    }\n  };\n\n  // --- KAPSÃœLLENMÄ°Åž ARAYÃœZ (RETURN) ---\n  return {\n    // State'ler\n    repoId,\n    folders,\n    selectedFolder,\n    jiraInput,\n    loading,\n    foldersLoading,\n    syncResults,\n    showNewFolder,\n    newFolderName,\n    previewTask,\n    previewLoading,\n    settingsData,\n    settingsLoading,\n    historyData,\n    stats,\n    settingsTab,\n    passwordData,\n    passwordErrors,\n    dashboardErrors,\n    // YENÄ° STATE'LER\n    showDuplicateModal,\n    duplicateItem,\n    // Setters\n    setRepoId,\n    setSelectedFolder: value => {\n      setSelectedFolder(value);\n      if (dashboardErrors.selectedFolder) setDashboardErrors(e => ({\n        ...e,\n        selectedFolder: false\n      }));\n    },\n    setJiraInput: value => {\n      setJiraInput(value);\n      if (dashboardErrors.jiraInput) setDashboardErrors(e => ({\n        ...e,\n        jiraInput: false\n      }));\n    },\n    setNewFolderName: value => {\n      setNewFolderName(value);\n      if (dashboardErrors.newFolderName) setDashboardErrors(e => ({\n        ...e,\n        newFolderName: false\n      }));\n    },\n    setShowNewFolder,\n    setSettingsData,\n    setSettingsTab,\n    setPasswordData,\n    setPasswordErrors,\n    setShowDuplicateModal,\n    // Ä°ÅŸlevler\n    handleSync,\n    handleCreateFolder,\n    saveSettings,\n    handleChangePassword,\n    handleForceUpdate,\n    // <--- DIÅžARI AÃ‡IYORUZ\n    fetchFolders,\n    fetchStats\n  };\n};\n_s(useDashboard, \"2cSFivRZV1zZl62uvApvuIQunxI=\");","map":{"version":3,"names":["useState","useEffect","useCallback","axios","toast","API_BASE_URL","useDashboard","token","currentView","onLogout","navigate","_s","repoId","setRepoId","folders","setFolders","selectedFolder","setSelectedFolder","jiraInput","setJiraInput","loading","setLoading","foldersLoading","setFoldersLoading","syncResults","setSyncResults","showNewFolder","setShowNewFolder","newFolderName","setNewFolderName","dashboardErrors","setDashboardErrors","showDuplicateModal","setShowDuplicateModal","duplicateItem","setDuplicateItem","previewTask","setPreviewTask","previewLoading","setPreviewLoading","settingsData","setSettingsData","settingsLoading","setSettingsLoading","historyData","setHistoryData","stats","setStats","total_cases","total_images","today_syncs","settingsTab","setSettingsTab","passwordData","setPasswordData","old","new","confirm","passwordErrors","setPasswordErrors","fetchFolders","res","get","list","data","sort","a","b","name","localeCompare","sensitivity","err","_err$response","response","status","fetchStats","console","error","then","cleanData","delay","setTimeout","length","includes","post","task_key","clearTimeout","handleSync","newErrors","trim","e","icon","tId","jira_input","folder_id","project_id","results","duplicate","find","r","dismiss","success","filter","failed","id","duration","handleForceUpdate","task","force_update","newResult","prev","case_name","handleCreateFolder","finalName","isDuplicate","some","f","toLowerCase","_res$data$data","parent_id","newFolderId","listRes","allFolders","createdFolderObj","otherFolders","_err$response2","_err$response2$data","msg","saveSettings","handleChangePassword","hasError","tempErrors","old_password","new_password","_err$response3","_err$response3$data","value"],"sources":["/Users/btcyz554/PycharmProjects/VeloxCaseFe/src/features/dashboard/useDashboard.js"],"sourcesContent":["// src/features/dashboard/useDashboard.js\n\nimport { useState, useEffect, useCallback } from 'react';\nimport axios from 'axios';\nimport toast from 'react-hot-toast';\n\nconst API_BASE_URL = 'https://quickcase-api.onrender.com/api';\n\n/**\n * useDashboard: Dashboard ekranÄ±nÄ±n tÃ¼m veri yÃ¶netimi ve iÅŸ mantÄ±ÄŸÄ±nÄ± yÃ¶netir.\n */\nexport const useDashboard = (token, currentView, onLogout, navigate) => {\n    // --- DASHBOARD STATE'leri ---\n    const [repoId, setRepoId] = useState(1);\n    const [folders, setFolders] = useState([]);\n    const [selectedFolder, setSelectedFolder] = useState('');\n    const [jiraInput, setJiraInput] = useState('');\n    const [loading, setLoading] = useState(false);\n    const [foldersLoading, setFoldersLoading] = useState(false);\n    const [syncResults, setSyncResults] = useState([]);\n    const [showNewFolder, setShowNewFolder] = useState(false);\n    const [newFolderName, setNewFolderName] = useState('');\n\n    // YENÄ°: Dashboard Input Hata State'i\n    const [dashboardErrors, setDashboardErrors] = useState({\n        jiraInput: false,\n        selectedFolder: false,\n        newFolderName: false\n    });\n\n    // YENÄ°: Duplicate (AynÄ± KayÄ±t) YÃ¶netimi Ä°Ã§in State'ler\n    const [showDuplicateModal, setShowDuplicateModal] = useState(false);\n    const [duplicateItem, setDuplicateItem] = useState(null);\n\n    // --- PREVIEW STATE ---\n    const [previewTask, setPreviewTask] = useState(null);\n    const [previewLoading, setPreviewLoading] = useState(false);\n\n    // --- SETTINGS & DATA STATE'leri ---\n    const [settingsData, setSettingsData] = useState({});\n    const [settingsLoading, setSettingsLoading] = useState(false);\n    const [historyData, setHistoryData] = useState([]);\n    const [stats, setStats] = useState({ total_cases: 0, total_images: 0, today_syncs: 0 });\n    const [settingsTab, setSettingsTab] = useState('api');\n    const [passwordData, setPasswordData] = useState({ old: '', new: '', confirm: '' });\n    const [passwordErrors, setPasswordErrors] = useState({ old: false, new: false, confirm: false });\n\n\n    // --- VERÄ° Ã‡EKME Ä°ÅžLEVLERÄ° ---\n    const fetchFolders = useCallback(async () => {\n        if (!repoId || !token || currentView !== 'dashboard') return;\n        setFoldersLoading(true);\n        try {\n            const res = await axios.get(`${API_BASE_URL}/folders/${repoId}`);\n            let list = res.data.folders || [];\n\n            // Alfabetik (TÃ¼rkÃ§e) SÄ±ralama\n            list.sort((a, b) => a.name.localeCompare(b.name, 'tr', { sensitivity: 'base' }));\n\n            setFolders(list);\n        } catch (err) {\n            if(err.response?.status === 401) onLogout();\n        } finally {\n            setFoldersLoading(false);\n        }\n    }, [repoId, token, currentView, onLogout]);\n\n    const fetchStats = useCallback(async () => {\n        if (!token || currentView !== 'dashboard') return;\n        try {\n            const res = await axios.get(`${API_BASE_URL}/stats`);\n            setStats(res.data);\n        } catch (err) {\n            console.error(err);\n        }\n    }, [token, currentView]);\n\n\n    // --- YAN ETKÄ°LER (USE EFFECT) ---\n    useEffect(() => {\n        if(token && currentView === 'dashboard') {\n            fetchFolders();\n            fetchStats();\n        }\n    }, [fetchFolders, fetchStats, token, currentView]);\n\n    useEffect(() => {\n        if (currentView === 'history' && token) {\n            axios.get(`${API_BASE_URL}/history`).then(res => setHistoryData(res.data));\n        }\n        if (currentView === 'settings' && token) {\n            axios.get(`${API_BASE_URL}/settings`).then(res => {\n                // eslint-disable-next-line no-unused-vars\n                const { ...cleanData } = res.data;\n                setSettingsData(cleanData);\n            });\n        }\n    }, [currentView, token]);\n\n    useEffect(() => {\n        setPreviewTask(null);\n        const delay = setTimeout(async () => {\n            if (token && jiraInput.length > 5 && !jiraInput.includes(',')) {\n                setPreviewLoading(true);\n                try {\n                    const res = await axios.post(`${API_BASE_URL}/preview`, { task_key: jiraInput });\n                    setPreviewTask(res.data);\n                } catch {\n                    setPreviewTask(null);\n                } finally {\n                    setPreviewLoading(false);\n                }\n            } else {\n                setPreviewTask(null);\n            }\n        }, 800);\n        return () => clearTimeout(delay);\n    }, [jiraInput, token]);\n\n\n    // --- Ä°ÅžLEVLER: CRUD/AKSYONLAR ---\n\n    // 1. Senkronizasyon BaÅŸlatma (GÃœNCELLENDÄ°: Duplicate KontrolÃ¼)\n    const handleSync = async () => {\n        const newErrors = {\n            jiraInput: !jiraInput || jiraInput.trim() === '',\n            selectedFolder: !selectedFolder || selectedFolder === ''\n        };\n        setDashboardErrors(e => ({...e, ...newErrors}));\n\n        if (newErrors.jiraInput || newErrors.selectedFolder) {\n            return toast.error(\"LÃ¼tfen Jira AnahtarÄ± ve Hedef KlasÃ¶r alanlarÄ±nÄ± doldurunuz.\", { icon: 'ðŸ›‘' });\n        }\n\n        setLoading(true); setSyncResults([]);\n        const tId = toast.loading('Entegrasyon baÅŸlatÄ±ldÄ±, veriler iÅŸleniyor...');\n\n        try {\n            const res = await axios.post(`${API_BASE_URL}/sync`, {\n                jira_input: jiraInput,\n                folder_id: selectedFolder,\n                project_id: repoId\n            });\n\n            const results = res.data.results || [];\n            setSyncResults(results);\n\n            // --- DUPLICATE KONTROLÃœ ---\n            const duplicate = results.find(r => r.status === 'duplicate');\n\n            if (duplicate) {\n                // Duplicate varsa modalÄ± aÃ§, loading'i kapat (kullanÄ±cÄ± karar verecek)\n                setDuplicateItem(duplicate);\n                setShowDuplicateModal(true);\n                toast.dismiss(tId);\n            } else {\n                // Duplicate yoksa normal baÅŸarÄ± akÄ±ÅŸÄ±\n                const success = results.filter(r => r.status === 'success').length;\n                const failed = results.length - success;\n\n                if (success > 0) {\n                    toast.success(`Ä°ÅŸlem TamamlandÄ±! ${success} kayÄ±t baÅŸarÄ±yla aktarÄ±ldÄ±. ${failed > 0 ? `(${failed} hata)` : ''}`, { id: tId, duration: 5000 });\n                    setJiraInput('');\n                    fetchStats();\n                } else {\n                    toast.error(\"Ä°ÅŸlem sÄ±rasÄ±nda hata oluÅŸtu.\", { id: tId });\n                }\n            }\n        } catch (err) {\n            toast.error(\"Sunucu ile iletiÅŸim kurulamadÄ±.\", { id: tId });\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    // 2. Force Update (KullanÄ±cÄ± \"Evet, GÃ¼ncelle\" dediÄŸinde Ã§alÄ±ÅŸÄ±r)\n    const handleForceUpdate = async () => {\n        if (!duplicateItem) return;\n\n        setShowDuplicateModal(false); // ModalÄ± kapat\n        setLoading(true);\n        const tId = toast.loading('GÃ¼ncelleme yapÄ±lÄ±yor...');\n\n        try {\n            // force_update: true parametresi ile tekrar istek atÄ±yoruz\n            const res = await axios.post(`${API_BASE_URL}/sync`, {\n                jira_input: duplicateItem.task,\n                folder_id: selectedFolder,\n                project_id: repoId,\n                force_update: true // <--- Backend bu bayraÄŸÄ± gÃ¶rÃ¼nce gÃ¼ncelleyecek\n            });\n\n            const newResult = res.data.results[0]; // Tek task olduÄŸu iÃ§in ilk sonucu al\n\n            // Listeyi gÃ¼ncelle: Eski duplicate satÄ±rÄ±nÄ± sil, yeni sonucu ekle\n            setSyncResults(prev => [\n                newResult,\n                ...prev.filter(r => r.task !== duplicateItem.task)\n            ]);\n\n            if (newResult.status === 'success') {\n                toast.success(`Case BaÅŸarÄ±yla GÃ¼ncellendi: ${newResult.case_name}`, { id: tId });\n                fetchStats();\n            } else {\n                toast.error(\"GÃ¼ncelleme baÅŸarÄ±sÄ±z oldu.\", { id: tId });\n            }\n\n        } catch (err) {\n            toast.error(\"GÃ¼ncelleme sÄ±rasÄ±nda hata oluÅŸtu.\", { id: tId });\n        } finally {\n            setLoading(false);\n            setDuplicateItem(null);\n        }\n    };\n\n    // 3. Yeni KlasÃ¶r OluÅŸturma\n    const handleCreateFolder = async () => {\n        // BoÅŸluk kontrolÃ¼\n        if (!newFolderName || newFolderName.trim() === '') {\n            setDashboardErrors(e => ({...e, newFolderName: true}));\n            return toast.error(\"LÃ¼tfen klasÃ¶r adÄ± giriniz.\");\n        }\n\n        const finalName = newFolderName.trim();\n\n        // Ä°sim TekrarÄ± KontrolÃ¼ (Frontend)\n        const isDuplicate = folders.some(\n            f => f.name.toLowerCase() === finalName.toLowerCase()\n        );\n\n        if (isDuplicate) {\n            setDashboardErrors(e => ({...e, newFolderName: true}));\n            return toast.error(\"Bu isimde bir klasÃ¶r zaten mevcut!\", { icon: 'âš ï¸' });\n        }\n\n        try {\n            const res = await axios.post(`${API_BASE_URL}/folders/${repoId}`, { name: finalName, parent_id: selectedFolder || null });\n\n            const newFolderId = res.data.id || res.data.data?.id;\n\n            // Listeyi gÃ¼ncelle ve sÄ±rala\n            const listRes = await axios.get(`${API_BASE_URL}/folders/${repoId}`);\n            let allFolders = listRes.data.folders || [];\n\n            const createdFolderObj = allFolders.find(f => f.id === newFolderId) || { id: newFolderId, name: finalName };\n            const otherFolders = allFolders.filter(f => f.id !== newFolderId);\n\n            // A-Z SÄ±rala\n            otherFolders.sort((a, b) => a.name.localeCompare(b.name, 'tr', { sensitivity: 'base' }));\n\n            // Yeni klasÃ¶rÃ¼ en baÅŸa ekle\n            setFolders([createdFolderObj, ...otherFolders]);\n\n            if(newFolderId) setSelectedFolder(newFolderId);\n\n            setNewFolderName('');\n            setShowNewFolder(false);\n            setDashboardErrors(e => ({...e, newFolderName: false}));\n\n            toast.success(`KlasÃ¶r baÅŸarÄ±yla oluÅŸturuldu: ${finalName}`, { icon: 'ðŸ“' });\n        } catch (err) {\n            setDashboardErrors(e => ({...e, newFolderName: true}));\n            const msg = err.response?.data?.msg || \"KlasÃ¶r oluÅŸturma hatasÄ±.\";\n            toast.error(msg);\n        }\n    };\n\n    // 4. AyarlarÄ± Kaydetme\n    const saveSettings = async () => {\n        setSettingsLoading(true);\n        try {\n            await axios.post(`${API_BASE_URL}/settings`, settingsData);\n            toast.success(\"YapÄ±landÄ±rma ayarlarÄ± baÅŸarÄ±yla gÃ¼ncellendi.\", { icon: 'ðŸ’¾' });\n            // Ayarlar kaydedilince Dashboard'a dÃ¶n (Opsiyonel, navigate kullanarak)\n            setTimeout(() => navigate('/'), 1000);\n        } catch {\n            toast.error(\"Ayarlar kaydedilemedi. LÃ¼tfen tÃ¼m alanlarÄ±n doÄŸru olduÄŸundan emin olun.\");\n        } finally {\n            setSettingsLoading(false);\n        }\n    };\n\n    // 5. Åžifre DeÄŸiÅŸtirme\n    const handleChangePassword = async () => {\n        setPasswordErrors({ old: false, new: false, confirm: false });\n\n        let hasError = false;\n        const tempErrors = { old: false, new: false, confirm: false };\n\n        if (!passwordData.old) { tempErrors.old = true; hasError = true; }\n        if (!passwordData.new) { tempErrors.new = true; hasError = true; }\n        if (!passwordData.confirm) { tempErrors.confirm = true; hasError = true; }\n\n        if (hasError) {\n            setPasswordErrors(tempErrors);\n            return toast.error(\"LÃ¼tfen ÅŸifre alanlarÄ±nÄ± eksiksiz doldurunuz.\");\n        }\n\n        if (passwordData.new !== passwordData.confirm) {\n            setPasswordErrors(e => ({...e, new: true, confirm: true}));\n            return toast.error(\"Yeni ÅŸifreler birbiriyle uyuÅŸmuyor.\");\n        }\n\n        if (passwordData.new.length < 8) {\n            setPasswordErrors(e => ({...e, new: true, confirm: true}));\n            return toast.error(\"Yeni ÅŸifreniz en az 8 karakter olmalÄ±dÄ±r.\");\n        }\n\n        setSettingsLoading(true);\n        try {\n            await axios.post(`${API_BASE_URL}/change-password`, { old_password: passwordData.old, new_password: passwordData.new });\n            toast.success(\"Åžifreniz baÅŸarÄ±yla gÃ¼ncellendi. Yeni ÅŸifrenizle giriÅŸ yapÄ±nÄ±z.\", { icon: 'ðŸ”’' });\n            setPasswordData({ old: '', new: '', confirm: '' });\n        } catch (err) {\n            const msg = err.response?.data?.msg || \"Åžifre deÄŸiÅŸtirilemedi.\";\n            if (msg.includes('old password is incorrect')) {\n                 setPasswordErrors(e => ({...e, old: true}));\n                 toast.error(\"Mevcut ÅŸifreniz hatalÄ±. LÃ¼tfen doÄŸru ÅŸifrenizi giriniz.\");\n            } else {\n                 toast.error(msg);\n            }\n        } finally {\n            setSettingsLoading(false);\n        }\n    };\n\n    // --- KAPSÃœLLENMÄ°Åž ARAYÃœZ (RETURN) ---\n    return {\n        // State'ler\n        repoId, folders, selectedFolder, jiraInput, loading, foldersLoading, syncResults,\n        showNewFolder, newFolderName, previewTask, previewLoading, settingsData, settingsLoading,\n        historyData, stats, settingsTab, passwordData, passwordErrors, dashboardErrors,\n\n        // YENÄ° STATE'LER\n        showDuplicateModal, duplicateItem,\n\n        // Setters\n        setRepoId,\n        setSelectedFolder: (value) => {\n            setSelectedFolder(value);\n            if (dashboardErrors.selectedFolder) setDashboardErrors(e => ({...e, selectedFolder: false}));\n        },\n        setJiraInput: (value) => {\n            setJiraInput(value);\n            if (dashboardErrors.jiraInput) setDashboardErrors(e => ({...e, jiraInput: false}));\n        },\n        setNewFolderName: (value) => {\n            setNewFolderName(value);\n            if (dashboardErrors.newFolderName) setDashboardErrors(e => ({...e, newFolderName: false}));\n        },\n        setShowNewFolder, setSettingsData, setSettingsTab, setPasswordData,\n        setPasswordErrors, setShowDuplicateModal,\n\n        // Ä°ÅŸlevler\n        handleSync, handleCreateFolder, saveSettings, handleChangePassword,\n        handleForceUpdate, // <--- DIÅžARI AÃ‡IYORUZ\n        fetchFolders, fetchStats\n    };\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}